# üöÄ –ü–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ NestJS

## üìã –í–æ–ø—Ä–æ—Å—ã –¥–ª—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è

–ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω—É–∂–Ω–æ –ø—Ä–∏–Ω—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞–∂–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π:

### 1. üóÑÔ∏è –ü–æ–¥—Ö–æ–¥ –∫ —Ä–∞–±–æ—Ç–µ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

**–í–∞—Ä–∏–∞–Ω—Ç—ã:**

**A) TypeORM** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è NestJS)
- ‚úÖ –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å NestJS
- ‚úÖ –î–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã –¥–ª—è entities
- ‚úÖ Migrations –≤—Å—Ç—Ä–æ–µ–Ω—ã
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π —Å `@Transaction`
- ‚ùå –ë–æ–ª–µ–µ —Ç—è–∂–µ–ª–æ–≤–µ—Å–Ω—ã–π
- ‚ùå –¢—Ä–µ–±—É–µ—Ç –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å –≤—Å–µ SQL –∑–∞–ø—Ä–æ—Å—ã

**B) Prisma** (—Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥)
- ‚úÖ Type-safe –∏–∑ –∫–æ—Ä–æ–±–∫–∏
- ‚úÖ –û—Ç–ª–∏—á–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å TypeScript
- ‚úÖ Prisma Studio –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–∏–ø–æ–≤
- ‚ùå –¢—Ä–µ–±—É–µ—Ç –∏–∑—É—á–µ–Ω–∏—è Prisma schema
- ‚ùå –¢—Ä–µ–±—É–µ—Ç –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å –≤—Å–µ SQL –∑–∞–ø—Ä–æ—Å—ã

**C) –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å pg + raw SQL** (–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è)
- ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤—Å–µ —Ç–µ–∫—É—â–∏–µ SQL –∑–∞–ø—Ä–æ—Å—ã
- ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∫–∞–∫ –µ—Å—Ç—å (SELECT FOR UPDATE)
- ‚úÖ –ú–∏–Ω–∏–º—É–º –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è—Ö
- ‚úÖ –ë—ã—Å—Ç—Ä–µ–µ –≤—Å–µ–≥–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å
- ‚ùå –ù–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–∏–ø–æ–≤
- ‚ùå –ú–µ–Ω–µ–µ "NestJS way"

**–ú–û–Ø –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø: –í–∞—Ä–∏–∞–Ω—Ç C (pg + raw SQL)**
- –ë—ã—Å—Ç—Ä–µ–µ –≤—Å–µ–≥–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å
- –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—É—é –ª–æ–≥–∏–∫—É —Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏
- –ú–æ–∂–µ–º –ø–æ–∑–∂–µ –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ ORM –µ—Å–ª–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è

### 2. üîß –í–∞–ª–∏–¥–∞—Ü–∏—è

**–í–∞—Ä–∏–∞–Ω—Ç—ã:**

**A) class-validator + class-transformer** (NestJS —Å—Ç–∞–Ω–¥–∞—Ä—Ç)
- ‚úÖ –î–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è —Ç–∏–ø–æ–≤
- ‚úÖ –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å NestJS
- ‚ùå –ù—É–∂–Ω–æ –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å Zod —Å—Ö–µ–º—ã

**B) –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å Zod**
- ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â–∏–µ —Å—Ö–µ–º—ã
- ‚úÖ Type inference —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚ùå –ù—É–∂–µ–Ω custom pipe –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

**–ú–û–Ø –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø: –í–∞—Ä–∏–∞–Ω—Ç A (class-validator)**
- –≠—Ç–æ NestJS way
- –õ—É—á—à–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å Swagger
- –ü—Ä–æ—â–µ –¥–ª—è –∫–æ–º–∞–Ω–¥—ã –≤ –±—É–¥—É—â–µ–º

### 3. üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

**–í–∞—Ä–∏–∞–Ω—Ç—ã:**

**A) Monorepo —Å—Ç—Ä—É–∫—Ç—É—Ä–∞** (modules –≤ src/)
```
src/
‚îú‚îÄ‚îÄ events/
‚îú‚îÄ‚îÄ bookings/
‚îú‚îÄ‚îÄ common/
‚îú‚îÄ‚îÄ config/
‚îî‚îÄ‚îÄ database/
```

**B) –ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞** (modules –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π –ø–∞–ø–∫–µ)
```
src/
‚îú‚îÄ‚îÄ modules/
‚îÇ   ‚îú‚îÄ‚îÄ events/
‚îÇ   ‚îî‚îÄ‚îÄ bookings/
‚îú‚îÄ‚îÄ common/
‚îú‚îÄ‚îÄ config/
‚îî‚îÄ‚îÄ database/
```

**–ú–û–Ø –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø: –í–∞—Ä–∏–∞–Ω—Ç A (modules –≤ src/)**
- –ü—Ä–æ—â–µ –∏ —á–∏—â–µ
- –°—Ç–∞–Ω–¥–∞—Ä—Ç –¥–ª—è NestJS –ø—Ä–æ–µ–∫—Ç–æ–≤

### 4. üîÑ –ü–æ–¥—Ö–æ–¥ –∫ –º–∏–≥—Ä–∞—Ü–∏–∏

**–í–∞—Ä–∏–∞–Ω—Ç—ã:**

**A) –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è** (–æ–±–∞ —Å–µ—Ä–≤–µ—Ä–∞ —Ä–∞–±–æ—Ç–∞—é—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ)
- –°–æ–∑–¥–∞—ë–º NestJS –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π –ø–∞–ø–∫–µ
- –°—Ç–∞—Ä—ã–π Express –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
- –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –ø–æ—Å–ª–µ –ø–æ–ª–Ω–æ–π –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

**B) –ü—Ä—è–º–∞—è –º–∏–≥—Ä–∞—Ü–∏—è** (–ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–µ–º –≤ —Ç–æ–π –∂–µ –ø–∞–ø–∫–µ)
- –ü–µ—Ä–µ–ø–∏—Å—ã–≤–∞–µ–º –ø—Ä–æ–µ–∫—Ç –Ω–∞ –º–µ—Å—Ç–µ
- –ö–æ–º–º–∏—Ç–∏–º –ø–æ –º–µ—Ä–µ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –º–æ–¥—É–ª–µ–π
- –ë—ã—Å—Ç—Ä–µ–µ, –Ω–æ –±–æ–ª–µ–µ —Ä–∏—Å–∫–æ–≤–∞–Ω–Ω–æ

**–ú–û–Ø –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø: –í–∞—Ä–∏–∞–Ω—Ç B (–ø—Ä—è–º–∞—è –º–∏–≥—Ä–∞—Ü–∏—è)**
- –ú—ã –≤ feature branch, –±–µ–∑–æ–ø–∞—Å–Ω–æ
- –ü—Ä–æ—â–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
- –ú–µ–Ω—å—à–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞

---

## üìä –î–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏

### PHASE 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ ‚úÖ
**–í—Ä–µ–º—è: 30 –º–∏–Ω—É—Ç**

**–ó–∞–¥–∞—á–∏:**
1. ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å NestJS dependencies
2. ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–∞–∫–µ—Ç—ã (validation, config, etc.)
3. ‚úÖ –°–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–∞–ø–æ–∫
4. ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å tsconfig –¥–ª—è NestJS

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
```json
{
  "@nestjs/common": "^10.0.0",
  "@nestjs/core": "^10.0.0",
  "@nestjs/platform-express": "^10.0.0",
  "@nestjs/config": "^3.0.0",
  "class-validator": "^0.14.0",
  "class-transformer": "^0.5.1",
  "reflect-metadata": "^0.1.13",
  "rxjs": "^7.8.1"
}
```

---

### PHASE 2: –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
**–í—Ä–µ–º—è: 1 —á–∞—Å**

**–ó–∞–¥–∞—á–∏:**
1. ‚úÖ –°–æ–∑–¥–∞—Ç—å main.ts (entry point)
2. ‚úÖ –°–æ–∑–¥–∞—Ç—å app.module.ts (root module)
3. ‚úÖ –°–æ–∑–¥–∞—Ç—å app.controller.ts (health check)
4. ‚úÖ –°–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—ã–µ –ø–∞–ø–∫–∏ –º–æ–¥—É–ª–µ–π

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```
src/
‚îú‚îÄ‚îÄ main.ts                    # Bootstrap application
‚îú‚îÄ‚îÄ app.module.ts              # Root module
‚îú‚îÄ‚îÄ app.controller.ts          # Health check endpoint
‚îú‚îÄ‚îÄ config/                    # Configuration module
‚îÇ   ‚îú‚îÄ‚îÄ config.module.ts
‚îÇ   ‚îú‚îÄ‚îÄ env.config.ts
‚îÇ   ‚îî‚îÄ‚îÄ database.config.ts
‚îú‚îÄ‚îÄ database/                  # Database module
‚îÇ   ‚îú‚îÄ‚îÄ database.module.ts
‚îÇ   ‚îî‚îÄ‚îÄ database.provider.ts
‚îú‚îÄ‚îÄ events/                    # Events module
‚îÇ   ‚îî‚îÄ‚îÄ (–±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω–æ –≤ Phase 3)
‚îú‚îÄ‚îÄ bookings/                  # Bookings module
‚îÇ   ‚îî‚îÄ‚îÄ (–±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω–æ –≤ Phase 4)
‚îî‚îÄ‚îÄ common/                    # Shared resources
    ‚îú‚îÄ‚îÄ filters/
    ‚îú‚îÄ‚îÄ pipes/
    ‚îú‚îÄ‚îÄ guards/
    ‚îî‚îÄ‚îÄ interceptors/
```

---

### PHASE 3: Database –∏ Configuration
**–í—Ä–µ–º—è: 1 —á–∞—Å**

**–ó–∞–¥–∞—á–∏:**
1. ‚úÖ –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å env.ts ‚Üí ConfigModule
2. ‚úÖ –°–æ–∑–¥–∞—Ç—å database.module.ts
3. ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Pool provider –¥–ª—è pg
4. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- `ConfigModule` —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π —á–µ—Ä–µ–∑ Joi
- `DatabaseModule` —Å Pool provider
- Environment validation

---

### PHASE 4: Events Module
**–í—Ä–µ–º—è: 2-3 —á–∞—Å–∞**

**–ó–∞–¥–∞—á–∏:**
1. ‚úÖ –°–æ–∑–¥–∞—Ç—å events.module.ts
2. ‚úÖ –°–æ–∑–¥–∞—Ç—å DTOs (CreateEventDto, EventResponseDto)
3. ‚úÖ –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å EventRepository
4. ‚úÖ –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å EventService
5. ‚úÖ –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å EventController
6. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é
7. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
```
src/events/
‚îú‚îÄ‚îÄ events.module.ts
‚îú‚îÄ‚îÄ events.controller.ts
‚îú‚îÄ‚îÄ events.service.ts
‚îú‚îÄ‚îÄ events.repository.ts
‚îú‚îÄ‚îÄ dto/
‚îÇ   ‚îú‚îÄ‚îÄ create-event.dto.ts
‚îÇ   ‚îî‚îÄ‚îÄ event-response.dto.ts
‚îú‚îÄ‚îÄ entities/
‚îÇ   ‚îî‚îÄ‚îÄ event.entity.ts        # TypeScript interface
‚îî‚îÄ‚îÄ events.controller.spec.ts  # Tests
```

**API endpoints:**
- `GET /api/events` ‚Üí –í—Å–µ —Å–æ–±—ã—Ç–∏—è
- `GET /api/events/:id` ‚Üí –°–æ–±—ã—Ç–∏–µ —Å –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ –º–µ—Å—Ç–∞–º–∏

---

### PHASE 5: Bookings Module
**–í—Ä–µ–º—è: 2-3 —á–∞—Å–∞**

**–ó–∞–¥–∞—á–∏:**
1. ‚úÖ –°–æ–∑–¥–∞—Ç—å bookings.module.ts
2. ‚úÖ –°–æ–∑–¥–∞—Ç—å DTOs (CreateBookingDto, BookingResponseDto)
3. ‚úÖ –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å BookingRepository —Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏
4. ‚úÖ –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å BookingService
5. ‚úÖ –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å BookingController
6. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é
7. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å race conditions
8. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
```
src/bookings/
‚îú‚îÄ‚îÄ bookings.module.ts
‚îú‚îÄ‚îÄ bookings.controller.ts
‚îú‚îÄ‚îÄ bookings.service.ts
‚îú‚îÄ‚îÄ bookings.repository.ts
‚îú‚îÄ‚îÄ dto/
‚îÇ   ‚îú‚îÄ‚îÄ create-booking.dto.ts
‚îÇ   ‚îî‚îÄ‚îÄ booking-response.dto.ts
‚îú‚îÄ‚îÄ entities/
‚îÇ   ‚îî‚îÄ‚îÄ booking.entity.ts
‚îî‚îÄ‚îÄ bookings.controller.spec.ts
```

**API endpoints:**
- `POST /api/bookings/reserve` ‚Üí –°–æ–∑–¥–∞—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- `GET /api/bookings/event/:eventId` ‚Üí –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏—è
- `GET /api/bookings/user/:userId` ‚Üí –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–í–ê–ñ–ù–û:** –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∑–∞—â–∏—Ç—É –æ—Ç race conditions:
```typescript
// –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è —Å SELECT FOR UPDATE
const client = await this.pool.connect();
try {
  await client.query('BEGIN');
  await client.query('SELECT * FROM events WHERE id = $1 FOR UPDATE', [eventId]);
  // ... –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ INSERT
  await client.query('COMMIT');
} catch (error) {
  await client.query('ROLLBACK');
  throw error;
} finally {
  client.release();
}
```

---

### PHASE 6: Common (Middleware, Guards, Filters)
**–í—Ä–µ–º—è: 1-2 —á–∞—Å–∞**

**–ó–∞–¥–∞—á–∏:**
1. ‚úÖ –°–æ–∑–¥–∞—Ç—å Exception Filter (errorHandler)
2. ‚úÖ –°–æ–∑–¥–∞—Ç—å Logging Interceptor
3. ‚úÖ –°–æ–∑–¥–∞—Ç—å Validation Pipe
4. ‚úÖ –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å custom errors
5. ‚úÖ –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å logger

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
```
src/common/
‚îú‚îÄ‚îÄ filters/
‚îÇ   ‚îî‚îÄ‚îÄ http-exception.filter.ts
‚îú‚îÄ‚îÄ interceptors/
‚îÇ   ‚îî‚îÄ‚îÄ logging.interceptor.ts
‚îú‚îÄ‚îÄ pipes/
‚îÇ   ‚îî‚îÄ‚îÄ validation.pipe.ts
‚îú‚îÄ‚îÄ exceptions/
‚îÇ   ‚îú‚îÄ‚îÄ not-found.exception.ts
‚îÇ   ‚îî‚îÄ‚îÄ conflict.exception.ts
‚îî‚îÄ‚îÄ logger/
    ‚îî‚îÄ‚îÄ custom-logger.service.ts
```

---

### PHASE 7: –§–∏–Ω–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
**–í—Ä–µ–º—è: 1-2 —á–∞—Å–∞**

**–ó–∞–¥–∞—á–∏:**
1. ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Helmet
2. ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CORS
3. ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Graceful Shutdown
4. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å package.json scripts
5. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å Dockerfile
6. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å docker-compose.yml
7. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**main.ts –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**
- Global validation pipe
- Global exception filter
- Helmet middleware
- CORS
- Shutdown hooks

---

### PHASE 8: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
**–í—Ä–µ–º—è: 1-2 —á–∞—Å–∞**

**–ó–∞–¥–∞—á–∏:**
1. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ API endpoints
2. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å race conditions (–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã)
3. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ (UNIQUE constraint)
4. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å health check
5. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
6. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫
7. ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤ Docker

**–¢–µ—Å—Ç –∫–µ–π—Å—ã:**
```bash
# Health check
curl http://localhost:3000/health

# –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Å–æ–±—ã—Ç–∏—è
curl http://localhost:3000/api/events

# –ü–æ–ª—É—á–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ —Å –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ –º–µ—Å—Ç–∞–º–∏
curl http://localhost:3000/api/events/1

# –°–æ–∑–¥–∞—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
curl -X POST http://localhost:3000/api/bookings/reserve \
  -H "Content-Type: application/json" \
  -d '{"event_id": 1, "user_id": "user123"}'

# –ü–æ–ø—ã—Ç–∫–∞ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è (–¥–æ–ª–∂–Ω–∞ –≤–µ—Ä–Ω—É—Ç—å 409)
curl -X POST http://localhost:3000/api/bookings/reserve \
  -H "Content-Type: application/json" \
  -d '{"event_id": 1, "user_id": "user123"}'

# –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏—è
curl http://localhost:3000/api/bookings/event/1

# –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
curl http://localhost:3000/api/bookings/user/user123
```

---

### PHASE 9: Cleanup –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
**–í—Ä–µ–º—è: 30 –º–∏–Ω—É—Ç**

**–ó–∞–¥–∞—á–∏:**
1. ‚úÖ –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ Express —Ñ–∞–π–ª—ã
2. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å README.md
3. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å CONTRIBUTING.md (–µ—Å–ª–∏ –µ—Å—Ç—å)
4. ‚úÖ –°–æ–∑–¥–∞—Ç—å CHANGELOG.md –∑–∞–ø–∏—Å—å
5. ‚úÖ –§–∏–Ω–∞–ª—å–Ω—ã–π –∫–æ–º–º–∏—Ç

---

## ‚è±Ô∏è –û–±—â–µ–µ –≤—Ä–µ–º—è –º–∏–≥—Ä–∞—Ü–∏–∏

**–û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–∞—è –æ—Ü–µ–Ω–∫–∞:** 8-10 —á–∞—Å–æ–≤
**–†–µ–∞–ª–∏—Å—Ç–∏—á–Ω–∞—è –æ—Ü–µ–Ω–∫–∞:** 12-14 —á–∞—Å–æ–≤ (—Å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∏ –æ—Ç–ª–∞–¥–∫–æ–π)

---

## üîÑ –ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

1. ‚úÖ **–°–æ–≥–ª–∞—Å–æ–≤–∞—Ç—å —Ä–µ—à–µ–Ω–∏—è** (–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö, –≤–∞–ª–∏–¥–∞—Ü–∏—è, —Å—Ç—Ä—É–∫—Ç—É—Ä–∞)
2. ‚úÖ **Phase 1-2:** –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏ –±–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (1.5 —á–∞—Å–∞)
3. ‚úÖ **Phase 3:** Database –∏ Config (1 —á–∞—Å)
4. ‚úÖ **Phase 4:** Events Module (2-3 —á–∞—Å–∞)
5. ‚úÖ **Phase 5:** Bookings Module (2-3 —á–∞—Å–∞)
6. ‚úÖ **Phase 6:** Common (1-2 —á–∞—Å–∞)
7. ‚úÖ **Phase 7:** –§–∏–Ω–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (1-2 —á–∞—Å–∞)
8. ‚úÖ **Phase 8:** –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (1-2 —á–∞—Å–∞)
9. ‚úÖ **Phase 9:** Cleanup (30 –º–∏–Ω—É—Ç)

---

## üéØ –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—à–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- ‚úÖ –í—Å–µ API endpoints —Ä–∞–±–æ—Ç–∞—é—Ç –∏–¥–µ–Ω—Ç–∏—á–Ω–æ
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç race conditions —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ Health check endpoint —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ Graceful shutdown —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ù–µ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- ‚úÖ –ö–æ–¥ —Å–ª–µ–¥—É–µ—Ç NestJS best practices
- ‚úÖ TypeScript —Ç–∏–ø—ã –≤–µ–∑–¥–µ
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –≤—Å–µ—Ö –≤—Ö–æ–¥–∞—Ö
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–∞
- ‚úÖ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- ‚úÖ README –æ–±–Ω–æ–≤–ª—ë–Ω
- ‚úÖ Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- ‚úÖ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ –∫–æ–¥–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã

---

## üìù –í–æ–ø—Ä–æ—Å—ã –¥–ª—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è

–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥—Ç–≤–µ—Ä–¥–∏ —Å–ª–µ–¥—É—é—â–∏–µ —Ä–µ—à–µ–Ω–∏—è:

### 1. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- [ ] **–í–∞—Ä–∏–∞–Ω—Ç A:** TypeORM (–ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å SQL)
- [ ] **–í–∞—Ä–∏–∞–Ω—Ç B:** Prisma (–ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å SQL)
- [X] **–í–∞—Ä–∏–∞–Ω—Ç C:** –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å pg + raw SQL *(—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)*

### 2. –í–∞–ª–∏–¥–∞—Ü–∏—è
- [X] **–í–∞—Ä–∏–∞–Ω—Ç A:** class-validator + class-transformer *(—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)*
- [ ] **–í–∞—Ä–∏–∞–Ω—Ç B:** –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å Zod

### 3. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
- [X] **–í–∞—Ä–∏–∞–Ω—Ç A:** Modules –≤ src/ *(—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)*
- [ ] **–í–∞—Ä–∏–∞–Ω—Ç B:** Modules –≤ src/modules/

### 4. –ü–æ–¥—Ö–æ–¥ –∫ –º–∏–≥—Ä–∞—Ü–∏–∏
- [ ] **–í–∞—Ä–∏–∞–Ω—Ç A:** –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–∞—è (—Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –ø–∞–ø–∫—É)
- [X] **–í–∞—Ä–∏–∞–Ω—Ç B:** –ü—Ä—è–º–∞—è (–ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å –Ω–∞ –º–µ—Å—Ç–µ) *(—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)*

### 5. Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [X] **–î–∞**, –¥–æ–±–∞–≤–∏—Ç—å @nestjs/swagger
- [ ] **–ù–µ—Ç**, –ø–æ–∫–∞ –Ω–µ –Ω—É–∂–Ω–æ

### 6. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å—Ç–∞—Ä—ã–µ —Ñ–∞–π–ª—ã?
- [ ] **–î–∞**, –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤ `/old` –¥–ª—è —Å–ø—Ä–∞–≤–∫–∏
- [X] **–ù–µ—Ç**, —É–¥–∞–ª–∏—Ç—å –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏ *(—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)*

---

## üöÄ –ì–æ—Ç–æ–≤ –Ω–∞—á–∞—Ç—å?

–ü–æ—Å–ª–µ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è —Ä–µ—à–µ–Ω–∏–π –≤—ã—à–µ, —è –Ω–∞—á–Ω—É –º–∏–≥—Ä–∞—Ü–∏—é –ø–æ—ç—Ç–∞–ø–Ω–æ.

**–•–æ—á–µ—à—å:**
- **A)** –ù–∞—á–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é —Å –º–æ–∏–º–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏ (–æ—Ç–º–µ—á–µ–Ω—ã [X])
- **B)** –ò–∑–º–µ–Ω–∏—Ç—å –∫–∞–∫–∏–µ-—Ç–æ —Ä–µ—à–µ–Ω–∏—è –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º
- **C)** –î–æ–±–∞–≤–∏—Ç—å —á—Ç–æ-—Ç–æ –≤ –ø–ª–∞–Ω

–ù–∞–ø–∏—à–∏ —á—Ç–æ –≤—ã–±–∏—Ä–∞–µ—à—å, –∏ —è –Ω–∞—á–Ω—É! üéØ
